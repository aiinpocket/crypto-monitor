<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<nav th:fragment="navbar(user)" class="fixed top-0 left-0 right-0 z-50 bg-bg-card/95 backdrop-blur border-b border-border-main px-6 py-3">
    <div class="flex items-center justify-between max-w-screen-2xl mx-auto">
        <!-- Logo -->
        <div class="flex items-center gap-3">
            <svg class="w-8 h-8 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                <path d="M2 17l10 5 10-5"/>
                <path d="M2 12l10 5 10-5"/>
            </svg>
            <span class="font-heading text-xl font-bold text-primary glow-gold">BtcTrade</span>
        </div>

        <!-- Nav Links -->
        <div class="flex items-center gap-6">
            <a href="/" class="text-text-muted hover:text-text-main transition-colors duration-200 text-sm font-medium cursor-pointer">
                <svg class="w-4 h-4 inline mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                Dashboard
            </a>
            <a href="/strategies" class="text-text-muted hover:text-text-main transition-colors duration-200 text-sm font-medium cursor-pointer">
                <svg class="w-4 h-4 inline mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20V10"/><path d="M18 20V4"/><path d="M6 20v-4"/></svg>
                Strategies
            </a>
            <a href="/backtest" class="text-text-muted hover:text-text-main transition-colors duration-200 text-sm font-medium cursor-pointer">
                <svg class="w-4 h-4 inline mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
                Backtest
            </a>
            <a href="/settings" class="text-text-muted hover:text-text-main transition-colors duration-200 text-sm font-medium cursor-pointer">
                <svg class="w-4 h-4 inline mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                Settings
            </a>
        </div>

        <!-- User -->
        <div class="flex items-center gap-3">
            <div class="text-right">
                <div class="text-sm font-medium text-text-main" th:text="${user.displayName}">User</div>
                <div class="text-xs text-text-muted" th:text="${user.email}">email</div>
            </div>
            <img th:if="${user.avatarUrl != null}" th:src="${user.avatarUrl}"
                 class="w-9 h-9 rounded-full border-2 border-primary/50" alt="avatar">
            <div th:unless="${user.avatarUrl != null}"
                 class="w-9 h-9 rounded-full bg-cta flex items-center justify-center text-white font-bold text-sm"
                 th:text="${user.displayName != null ? user.displayName.substring(0,1) : '?'}">U</div>
            <a href="/logout" class="ml-2 text-text-muted hover:text-negative transition-colors duration-200 cursor-pointer" title="登出">
                <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
            </a>
        </div>
    </div>
</nav>
</html>
